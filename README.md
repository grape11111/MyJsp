# MyJsp
1. 需求分析
1.1 用户需求：系统现状，要解决的主要问题，达到的具体指标等。
以高校图书馆管理系统为背景，主要解决学生、教师等用户查询、借阅图书以及图书管理员对书籍、用户的管理等问题；缩短借阅者对图书的查找时间，同时提高管理员的工作效率和管理水平，做到高效、智能化管理。
1.2 业务流程分析：描述系统的业务流程，画出规范的业务流程图。
①用户：
查询图书\借阅情况：登录图书管理系统按条件查询得到图书的基本信息或者用户的借阅情况
借阅图书：递交借书信息表表交给图书管理员，图书管理员根据学生信息查看能否借书，以及剩余借书的本数，未批准的登记表返回学生；若是可以借书，查阅书库目录，没有找到该书籍或者书籍被借完则返回学生
②管理员：
处理用户借阅情况：图书管理员根据学生信息查看能否借书，以及剩余借书的本数，未批准的登记表返回学生；若是可以借书，查阅书库目录，找到图书信息，更新借阅信息表，否则如果没有找到该书籍或者书籍被借完则返回学生
处理用户还书情况：图书管理员通过查看借阅信息表，判别用户还书时是否需缴纳罚金，需要的话则开出罚款信息单给用户，最后更改借阅信息
图书管理：图书管理员可以对图书进行增删查改等管理
业务流程图：

第0层数据流图：


第1层数据流图：


1.3 信息需求分析
1.3.1 资料收集：业务流程中用到的相关单据票证帐簿报表报告等资料，画出格式，最好是填有具体内容的表格等。
1.3.2 事项分析：分析资料中标题、表头等中各栏目名，列出所有事项，作为数据项；分析这些数据项，找出组合项、导出项、非结构化数据项，确定基本项。检查是否有要补充的基本数据项，是否有要改进的地方，补充改进之，得出所有基本项。(数据字典)
数据字典

①数据项

1. 数据项：　图书编号
     含义说明：唯一标识每一本不同的图书
　  别名：　　ISBN
    类型：　　字符型
    长度：　　13
    取值范围：00000000000至99999999999
　  取值含义：前三位数字代表国际物品编码，中国为978和979；第四位为组区号，中国组区号为“7”；接下来是出版者号，标识具体的出版者，其长度为2至7位，由中国ISBN管理机构设置和分配；然后是出版序号，由出版者按出版物的出版次序管理和编制；最后一位是校验码。
与其他数据项的逻辑关系：

2.  数据项：　书名
    含义说明：图书名字
    类型：　　字符型
    长度：　　40
与其他数据项的逻辑关系：

3. 数据项：　作者
    含义说明：图书的写作者
　  别名：　　无
    类型：　　字符型
    长度：　　20
取值范围：无
与其他数据项的逻辑关系：

4.  数据项：　出版社
含义说明：出版图书的机构
别名：　　无
    类型：　　字符型
    长度：　　20
取值范围：无
取值含义：无
与其他数据项的逻辑关系：

5.  数据项：　出版日期
含义说明：指图书首次印刷发行的日期  
别名：　　无
    类型：　　日期
    长度：　　20
    取值范围：无
　  取值含义：无
与其他数据项的逻辑关系：

6. 数据项：　价格
    含义说明：图书的定价
别名：　　无
类型：　　浮点型
    长度：　　6
    取值范围：0000.00至9999.99
　  取值含义：无
与其他数据项的逻辑关系：

7.数据项：　 馆藏地   
含义说明：图书的具体存放位置
　  别名：　　无
    类型：　　字符型
    长度：　　20
    取值范围：无
　  取值含义：无
与其他数据项的逻辑关系：

8. 数据项：　副本数量
    含义说明：表示同一本图书的副本数量
　  别名：　　无
类型：　　短整型
    长度：　　2
取值范围：0至99
取值含义：无
　与其他数据项的逻辑关系：

9..数据项：　可借数量
含义说明：同一本图书可出借的副本数量
别名：　　馆藏量
    类型：　　短整型
    长度：　　2
取值范围：0至99
取值含义：无
　与其他数据项的逻辑关系：

10.数据项：　索书号
    含义说明：方便对图书进行查找定位，唯一标识每一本图书，包括相同的图书
    类型：　　字符型
    长度：　　25
取值范围：A000.000（0000）至Z000.000（0000）
取值含义：索书号即图书分类号加上书次号，书次号即图书在该分类号下的顺序编号


11..数据项：　图书状态
    含义说明：表示图书所在状态，是否已被借阅
　  别名：　　无
    类型：　　字符型
    长度：　　8
    取值范围：已被借阅，可借，不外借
　  取值含义：无
　与其他数据项的逻辑关系：

12. 数据项：　图书分类号
    含义说明：图书类别，方便对图书进行查找定位，图书馆中图书一般按照图书类别分区存放
    类型：　　字符型
    长度：　　15
取值范围：A000.000至Z000.000
取值含义：图书分类号由大写字母和数字组成，根据字母分为22个大类.即用一个字母表示一个大类，以字母的顺序反映大类的序列.字母后用数字表示大类以下类目的划分，数字的编号使用小数制.
与其他数据项的逻辑关系：

13..数据项：　图书分类名
    含义说明：图书馆每一个分类号对应的图书分类名
别名：　　无
类型：　　字符型
    长度：　　30
取值范围：无
取值含义：无
　与其他数据项的逻辑关系：

14..数据项：　所在地址
含义说明：每一类图书存放的位置
别名：　　无
    类型：　　字符型
    长度：　　10
取值范围：无
取值含义：表示在图书馆的哪一层楼哪一排
　与其他数据项的逻辑关系：


15..数据项：　卡号
    含义说明：唯一标识每一个用户身份
　  别名：　　无
    类型：　　字符型
    长度：　　9
    取值范围：100000000到299999999
　  取值含义：第1位说明用户类型，1为教师，2为学生；第2、3为为系名，第4、5为年级名，最后4位为顺序编号
　与其他数据项的逻辑关系：

16.数据项：　密码
含义说明：登录图书管理系统时的密码，包括用户密码或者管理员密码
别名：　　无
    类型：　　字符型
    长度：　　15
    取值范围：无
　  取值含义：无
　与其他数据项的逻辑关系：

17..数据项：　用户姓名
    含义说明：图书借阅者名字
　  别名：　　用户名
    类型：　　字符型
    长度：　　20
    取值范围：无
　  取值含义：无
　与其他数据项的逻辑关系：

18..数据项：　性别
含义说明：无
别名：　　无
    类型：　　字符型
    长度：　　2
    取值范围：男，女
　  取值含义：无
　与其他数据项的逻辑关系：

19..数据项：　系名
    含义说明：学校各院系名
　  别名：　　无
    类型：　　字符型
    长度：　　20
    取值范围：无
　  取值含义：无
　与其他数据项的逻辑关系：

20..数据项：　联系方式
含义说明：方便联系借阅者
别名：　　无
    类型：　　字符型
    长度：　　12
    取值范围：无
　  取值含义：无
　与其他数据项的逻辑关系：

21..数据项：　累计借书
含义说明：借阅者累积借书的数量
别名：　　无
    类型：　　短整型
    长度：　　2
    取值范围：0到99
　  取值含义：无
　与其他数据项的逻辑关系：累积借阅信息表中同一用户的借阅数量

22..数据项：　借阅日期
含义说明：用户借阅图书的日期
别名：　　无
    类型：　　日期
    长度：　　无
    取值范围：无
　  取值含义：无
　与其他数据项的逻辑关系：

23..数据项：　归还日期
含义说明：用户归还图书的日期
别名：　　无
    类型：　　日期
    长度：　　无
取值范围：无
取值含义：无
　与其他数据项的逻辑关系：


24..数据项：　应还日期
含义说明：用户须归还图书的限定日期，超过该日期还书需交罚金
别名：　　无
    类型：　　日期
    长度：　　无
    取值范围：借阅日期+30+15*续借次数
　  取值含义：每本图书借阅期限为30天，每次续借可增加15天
　与其他数据项的逻辑关系：

25.数据项：　续借次数
    含义说明：登记续借次数
　  别名：　　无
    类型：　　短整型
    长度：　　2
    取值范围：0到2
　  取值含义：每个用户对同一本书只可以借阅最多2次
　与其他数据项的逻辑关系：

26..数据项：　罚款金额
    含义说明：用户没有按期归还图书需要交纳的相应金额
　  别名：　　无
    类型：　　浮点数
    长度：　　3
    取值范围：00.0到99.9
　  取值含义：每本图书逾期一天罚款0.1元，罚款金额为逾期天数与单位罚金的乘积
　与其他数据项的逻辑关系：

27..数据项：　还款日期
含义说明：用户交纳罚金的日期
别名：　　无
    类型：　　日期
    长度：　　无
取值范围：无
取值含义：无
与其他数据项的逻辑关系：

28.数据项：　备注
    含义说明：登记是否还款
　  别名：　　无
    类型：　　字符型
    长度：　　2
    取值范围：是、否
取值含义：
与其他数据项的逻辑关系：

29..数据项：　工号
    含义说明：唯一标识每一个管理员
　  别名：　　无
    类型：　　字符型
    长度：　　2
    取值范围：00到99
　  取值含义：顺序编号
　与其他数据项的逻辑关系：

30..数据项：　管理员姓名
    含义说明：表示登记借阅信息的经手人
　  别名：　　无
    类型：　　字符型
    长度：　　20
    取值范围：无
　  取值含义：无
　与其他数据项的逻辑关系：

②数据结构

1.数据结构： 用户信息
  含义说明： 定义了一个借阅者的有关信息
  组    成： 卡号，密码，用户姓名，性别，系名，联系方式，累计借书

2.数据结构： 图书基本信息
  含义说明： 定义了图书的有关信息
  组    成： 图书编号（ISBN）、书名、作者、出版社、出版日期、价格、馆藏			 		 地、副本数量、可借数量

3.数据结构： 图书副本
  含义说明： 定义了图书在馆的副本信息
  组    成： 索书号、图书状态

4.数据结构： 图书分类
  含义说明： 定义了图书分类的相关信息
  组    成： 图书分类号、图书分类名、所在地址

5.数据结构： 管理员信息
  含义说明： 定义了管理员的有关信息
  组    成： 工号，密码，管理员姓名，性别

6.数据结构： 借阅信息
  含义说明： 包括了所有的借书记录
  组    成： 卡号，工号，索书号，借阅日期，应还日期，归还日期，续借次数

7.数据结构：罚款信息信息
  含义说明： 包括所有逾期需缴纳罚款的用户及相关信息
  组    成： 序号，卡号，工号，罚款金额，还款日期，备注

③ 数据流 

1.数据流：　　查询信息
    说明：　　　用户通过图书管理系统查询图书信息
    数据流来源：用户
    数据流去向：图书基本信息
    组成：　　　卡号、用户姓名、图书编号、书名
　  平均流量：　400条/天
高峰期流量：600条/天

2.数据流：　用户借书信息
    说明：　　　用户所要借阅的图书
    数据流来源：用户
数据流去向：借阅处理
组成：　　　卡号、用户姓名、图书编号、书名、索书号
　  平均流量：　200条/天
高峰期流量：400条/天

3.数据流：　　用户还书信息
    说明：　　　用户所要归还的图书
    数据流来源：用户
数据流去向：还书处理
组成：　　　卡号、用户姓名、图书编号、书名、索书号
　  平均流量：　200条/天
高峰期流量：400条/天

4.数据流：　　管理员管理图书信息
    说明：　　　管理员对图书进行增加、删除、修改操作
    数据流来源：管理员
数据流去向：图书基本情况
组成：　　　工号、索书号、图书编号（ISBN）、书名、作者、出版社、出版				日期、价格、馆藏地、副本数量、可借数量、图书状态
　  平均流量：　100条/天
高峰期流量：300条/天

④ 数据存储

1.数据存储：　用户信息表
说明：　    记录用户的基本情况
流入数据流：用户基本信息
流出数据流：用户基本信息
组成：　　　用户信息
数据量：　　每年6000张
存取方式：　顺序存取

2.数据存储：　借阅信息表
说明：　    记录用户的借阅图书的基本情况
流入数据流：用户基本信息，图书基本信息
流出数据流：用户借书信息
组成：　　　借阅信息
数据量：　　每年10000张
存取方式：　顺序存取

3.数据存储： 罚款信息表
说明：　    记录用户的逾期还书交纳罚金的基本情况
流入数据流：用户基本信息，用户借阅信息
流出数据流：用户还书信息
组成：　　　用户基本信息，用户借阅信息
数据量：　　每年1000张
存取方式：　顺序存取


4.数据存储：　管理员信息表
说明：　    记录管理员的基本情况
流入数据流：管理员信息
流出数据流：管理信息
组成：　　　管理员信息
数据量：　　每年10张
存取方式：　顺序存取

⑤ 处理过程

1.处理过程：  借书
　说明：　　管理员为用户办理借书过程
　输入：　　用户，图书信息
　输出：　　借阅信息记录
　处理：　　在用户递交借阅卡后，管理员录入用户信息和所借的图书信息，记录借阅				信息每个用户最多只能借阅5本，每本借阅时间为30天，可办理至多2				次续借，每次续借时间为15天

2.处理过程：  还书
　说明：　　管理员为用户办理还书过程
　输入：　　用户，图书信息
　输出：　　借阅信息记录，罚款信息
　处理：　　在用户归还图书时，管理员录入用户信息和所借的图书信息，修改借阅信				息，查看所归还的图书是否逾期，逾期则需用户交纳罚金，罚金为逾期一				天0.1元

3.处理过程：  查询
　说明：　　用户查询图书基本信息，借阅信息的过程
　输入：　　图书基本信息，用户信息
　输出：　　图书基本信息，借阅信息
　处理：　　用户输入个人信息后，可查询个人图书借阅情况或者查询图书基本信息

1.4功能需求分析：改进完善业务流程图，分析用户需要系统完成哪些任务，逐层分解，画出功能层次图。
功能层次图：

数据库系统处理功能：
管理员对图书进行管理：图书基本情况的录入、修改、删除等基本操作
管理员处理借书业务：  登记借阅信息表
管理员处理还书业务：  修改借阅信息表，确定是否给予罚款信息表
用户进行图书查询业务，也可查询自己的图书借阅情况

2. （数据库）概念（模型）设计
写出由基本项构思ERD的四条原则及根据这些原则相应得出的实体、联系及其属性，并确定主实体的主标识，画出ERD（不少于三个主实体，两个联系和24个属性）；用原则4检查改正错误；对其中复杂的多元联系进行分析，必要则改进。
ER图：


图书：图书编号（ISBN）、书名、作者、出版社、出版日期、价格、馆藏地、副本数量、可借数量
副本：索书号、图书状态
图书类别：图书分类号、库存量、所在地址
用户：卡号、用户姓名、性别、系名、联系方式、累计借书、密码
管理员：工号，管理员姓名、性别、密码
借阅单：借阅日期、应还日期、归还日期、续借次数
分析：一个用户可以借阅多本图书，一本图书可以经过多人借阅
罚款单：罚款金额、日期、备注（是否还款）

3. （数据库）逻辑（模型）设计
3.1  一般逻辑模型设计：写出由ERD导出一般关系模型的四条原则，列出数据库初步构思的关系框架（二维表的表头）[与具体DBMS无关]，并检查改进优化之。
按照原则1将图书、图书分类、副本、用户、管理员等独立实体转换为关系

1.图书基本关系
图书编号	书名	作者	出版社	出版日期	价格	馆藏地	副本数量	可借数量
								
主码								

2.图书分类关系
图书分类号	图书分类名	所在地址
		
主码		

3.借阅卡信息关系
卡号	用户姓名	性别	系名	联系方式	累计借书	密码
						
主码						

4.管理员信息关系
工号	管理员姓名	性别	密码
			
主码			

5.图书副本关系
索书号	图书状态
	
主码	

按照原则3对图书基本关系、图书副本关系进行修改
1.图书基本信息关系
图书编号	书名	作者	出版社	出版日期	价格	馆藏地	副本数量	可借数量	图书分类号	工号
									外码	外码
主码										

5.图书副本关系
索书号	图书状态	图书编号	工号
		外码	外码
主码			

按照原则4得
6.罚款单信息关系
索书号	卡号	工号	罚款金额	还款日期	备注
外码	外码	外码			
主码（复合）				

7.借阅关系
索书号	卡号	工号	借阅日期	应还日期	归还日期	续借次数
外码	外码	外码				
主码（复合）					

经数据模型优化后得到7张表,2张视图
1.图书基本信息关系
图书编号	书名	作者	出版社	出版日期	价格	馆藏地	副本数量	可借数量	图书分类号	工号
									外码	外码
主码										

2.图书分类关系
图书分类号	图书分类名	所在地址
		
主码		

3.借阅卡信息关系
卡号	用户姓名	性别	系名	联系方式	累计借书	密码
						
主码						

4.管理员信息关系
工号	管理员姓名	性别	密码
			
主码			

5.图书副本关系
索书号	图书状态	图书编号	工号
		外码	外码
主码			

6.罚款单信息关系
索书号	卡号	工号	罚款金额	还款日期	备注
外码	外码	外码			
主码（复合）				

7.借阅关系
索书号	卡号	工号	借阅日期	应还日期	归还日期	续借次数
外码	外码	外码				
主码（复合）					

1.用户查阅图书视图（Book_users）：用户查询图书状态时可以同时看到图书基本信息和副本情况。
图书编号	书名	作者	出版社	出版日期	价格	馆藏地	副本数量	可借数量	图书分类号	索书号	图书状态
											

2.用户基本信息和借阅信息视图（Message_users）
卡号	用户姓名	性别	系名	联系方式	累计借书	索书号	借阅日期	应还日期	还书日期	续借次数
										

3.2  具体逻辑模型设计：按所用的DBMS要求，设计表（文件）的具体结构，在关系框架下补充字段类型、长度、小数位数等行。

1.图书基本信息关系
	图书编号
Bno	书名
Bname	作者
Bauthor	出版社
Bpublication	出版日期
Bdate	价格
Bprice	馆藏地
Baddress	副本数量
Bcopy	可借数量
Bcount	图书分类号
Cno	工号
Mno
										外码	外码
	主码										
字段类型	字符型	日期	浮点型	字符型	短整型	字符型
长度	13	40	20	20		2	20			15	2




2.图书分类关系
	图书分类号Cno	图书分类名
Cname	所在地址
Caddress
			
	主码		
字段类型	字符型
长度	15	30	10

3.借阅卡信息关系
	卡号
Uno	用户姓名Uname	性别Usex	系名Udept	联系方式
Uphone	累计借书
Ubook	密码Upwd
							
	主码						
字段类型	字符型	短整型	字符型
长度	9	20	2	20	12		15

4.管理员信息关系
	工号
Mno	管理员姓名Mname	性别
Msex	密码
Mpwd
				
	主码			
字段类型	字符型
长度	2	20	2	15

5.图书副本关系
	索书号
CBno	图书状态
CBstatus	图书编号
Bno	工号
Mno
			外码	外码
	主码			
字段类型	字符型
长度	25	8	13	2

6.罚款单信息关系
索书号	卡号	工号	罚款金额Fmoney	还款日期
Backdate	备注Remark
外码	外码	外码			
主码（复合）				
字符型	浮点型	日期	字符型
25	9	2			2

7.借阅关系
索书号
CBno	卡号
Uno	工号
Mno	借阅日期
Borrowdate	应还日期
Backdate	归还日期
Returndate	续借次数
Renew
外码	外码	外码				
主码（复合）					
字符型	日期	短整型
25	9	2				

4.  数据库物理设计与数据库保护设计
4.1 设计索引：在表（文件）的具体结构关系框架下补充字段索引行或在框架外补充索引说明，指出索引字段或索引表达式、索引类型。
参照3.2  各个表的主码即为索引，聚簇
4.2 设计表间关系：列出父表与子表的关联索引，指出要建立的表间关系的类型。
一对多关系：图书和图书类别，图书和副本关系，管理员对图书、副本的管理，
管理员对用户的管理
多对多关系：用户借阅、归还图书

4.3 完整性设计：列出主要字段完整性的字段名、完整性约束条件；列出记录完整性约束及其约束条件；列出参照完整性表。
完整性字段名	完整性约束类型	完整性约束条件
用户基本信息表
用户卡号	实体完整性	PRIMARY KEY
用户姓名	用户自定义完整性	UNIQUE, NOT NULL
用户性别	用户自定义完整性	NOT NULL,CHECK(Usex IN(‘男’,’女’))
管理员信息表
管理员工号	实体完整性	PRIMARY KEY
管理员姓名	用户自定义完整性	UNIQUE, NOT NULL
图书分类表
图书分类号	实体完整性	PRIMARY KEY
图书基本信息表
图书编号（IBSN）	实体完整性	PRIMARY KEY
图书分类号	参照完整性	FOREIGN KEY,参照图书分类表
管理员工号	参照完整性	FOREIGN KEY,参照管理员信息表
图书副本信息表
索书号	实体完整性	PRIMARY KEY
图书编号	参照完整性	FOREIGN KEY,参照图书基本信息表
管理员工号	参照完整性	FOREIGN KEY,参照管理员信息表
图书状态	用户自定义完整性	CHECK（CBststus IN（‘已被借阅’，‘可借’，‘不外借’））
借阅信息表
索书号	实体完整性	PRIMARY KEY
索书号	参照完整性	FOREIGN KEY,参照图书副本信息表
用户卡号	实体完整性	PRIMARY KEY
用户卡号	参照完整性	FOREIGN KEY,参照用户信息表
管理员工号	参照完整性	FOREIGN KEY,参照管理员信息表
罚款信息表
用户卡号	实体完整性	PRIMARY KEY
用户卡号	参照完整性	FOREIGN KEY,参照用户信息表
索书号	实体完整性	PRIMARY KEY
索书号	参照完整性	FOREIGN KEY,参照图书副本信息表
备注	用户自定义完整性	CHECK（Remark IN（‘是’，‘否’））
备注	用户自定义完整性	DEFAULT‘否’

4.4 在有多个用户操作时，考虑用户授权与安全性控制。
用户Grape对数据库中的基本表、视图都具有具有创建、修改、删除的权限
5.  处理功能设计（注意：此时系统未实现，设计结构都是写出或画出的，而不能是系统运行生成的）
5.1 主控模块设计：包括系统环境初始化、欢迎画面、用户身份验证、主控表单或菜单、告别画面、系统退出的环境恢复等功能。
登录界面、告别画面

欢迎界面

功能区菜单
管理员                  用户
       

5.2 子模块设计：按系统业务要求设计各项业务模块和系统管理模块，要能完成系统业务和系统管理功能。
系统业务和系统管理功能均在内容区显示
首页

用户管理

图书管理

借阅管理

还书管理

用户个人信息查询

用户图书查询


6.  数据库应用系统的实现
6.1 数据库及其表结构的建立：建立数据库描述文件及用命令定义并建立其数据库表），注意完整性、索引与永久关联的实现，并附打印出的源模式（CREATE TABLE命令）与作为命令执行结果的数据库表结构及其关联图、参照完整性表。
用户基本信息表
CREATE TABLE Users(
	Uno CHAR(9) NOT NULL PRIMARY KEY, 
	Uname CHAR(20) UNIQUE NOT NULL,
	Usex CHAR(2) CHECK (Usex IN('男','女')),
	Udept CHAR(20) NOT NULL,
	Uphone CHAR(12) NOT NULL,
	Ubook SMALLINT,
	Upwd CHAR(15)
  );

管理员信息表
CREATE TABLE Managers(
	Mno CHAR(2) NOT NULL PRIMARY KEY,
	Mname CHAR(20) NOT NULL,
	Msex CHAR(2)CHECK (Msex IN('男','女')),
	Mpwd CHAR(15)
);

图书分类表
CREATE TABLE Category(
	Cno CHAR(15)PRIMARY KEY,
	Cname CHAR(30),
	Caddress CHAR(10),
);

图书基本信息表
CREATE TABLE Book(
	Bno CHAR(13)NOT NULL PRIMARY KEY,
	Bname CHAR(40) NOT NULL,
	Bauthor CHAR(20) NOT NULL,
	Bpublication CHAR(20),
	Bdate DATE,
	Bprice FLOAT(6),
	Baddress CHAR(20),
	Bcopy  SMALLINT NOT NULL,
	Bcount SMALLINT,
	Cno CHAR(15),
	Mno CHAR(2),
	FOREIGN KEY(Cno) REFERENCES Category(Cno),
	FOREIGN KEY(Mno) REFERENCES Managers(Mno)
);

图书副本关系
CREATE TABLE Copy(
	CBno CHAR(25)NOT NULL PRIMARY KEY,
	CBstatus CHAR(8) CHECK(CBstatus IN('已被借阅','不外借','可借') )NOT NULL,
	Bno CHAR(13),
	Mno CHAR(2),
	FOREIGN KEY(Bno) REFERENCES Book(Bno),
	FOREIGN KEY(Mno) REFERENCES Managers(Mno)
);

借阅信息表
CREATE TABLE Book_Borrow(
	CBno CHAR(25)NOT NULL PRIMARY KEY,
	Uno CHAR(9) NOT NULL,
	Mno CHAR(2) NOT NULL,
	Borrowdate DATE NOT NULL,
	Backdate DATE,
	Returndate DATE,
	Renew SMALLINT,
	FOREIGN KEY(CBno) REFERENCES Copy(CBno),
	FOREIGN KEY(Uno) REFERENCES Users(Uno),
	FOREIGN KEY(Mno) REFERENCES Managers(Mno)
);

逾期罚款信息表
CREATE TABLE Fine(
	Uno CHAR(9),
	CBno CHAR(25),
	Fmoney FLOAT(3),
	Backdate DATE,
	Mno CHAR(2),
	Remark CHAR(2) CHECK (Remark IN('是','否'))default'否',
	PRIMARY KEY(Uno,CBno),
	FOREIGN KEY(Mno) REFERENCES Managers(Mno),
	FOREIGN KEY(CBno) REFERENCES Copy(CBno),
	FOREIGN KEY(Uno) REFERENCES Users(Uno)
);

6.2 数据输入：录入数据，并打印出的各表的内容。







6.3 模块实现：用视窗菜单和/或程序编辑器实现各模块，建议参考教材[2]采用菜单与多表单技术，调试正确后打印实现的系统输出结果。建议先实现输入模块，再实现其他子模块，然后实现主控模块。最好建立项目，用项目管理器来管理整个系统。打印出实现结果(表单、源程序)。写出实现的经过与体会。
  

连接数据库进行插入数据代码：


连接数据库进行删除数据代码：


连接数据库进行查询数据代码：


连接数据库进行修改数据代码：


模块实现的经过与体会：
最开始实现的是查询模块，因为我觉得所有的操作都是基于查询进行的，用的是静态执行Statement实例调用excuteQuery(sql)方法，再通过getString（）方法可以直接将查询得到的结果集一列一列的输出，接下来的删查改用的是动态执行prepareStatement(sql)实例调用executeUpdate（）方法，删除操作比较简单，插入数据需要注意数据类型和数据个数，我认为修改操作是最容易出错的，很容易忘记添加修改的Where条件，最后是比较综合的处理借阅操作、还书和罚款操作，因为每一个操作都包含了对多个表进行查询、删除和更新。

7.  数据库应用系统运行
7.1 写出系统操作使用的简要说明。
首先，打开登录页面选择图书管理员身份还是用户身份，通过账号（卡号、工号、姓名）和密码进行登录验证
其次，分图书管理员和用户进入不同页面
图书管理员：
用户管理--对用户基本信息进行修改或者删除
图书管理--可通过输入图书编号或者图书名进行图书及副本信息查询，也可以对图书基本信息进行增加、删除、修改操作
借阅管理--输入索书号、借阅者卡号和借阅日期，点击确定即可完成用户的借书操作，点击“查询所有借阅信息”可以看到所有借阅信息，同时点击按钮可完成用户的续借操作和还书操作
逾期罚款处理：点击“交纳罚金”按钮即可完成对用户罚金处理操作
用户：
个人信息--可查询个人基本信息和借阅信息
图书信息--可看到所有图书信息，也可以过输入图书编号或者图书名进行图书及副本信息查询
最后，点击退出系统即可返回最初的登录页面

7.2 按使用说明运行系统并打印出运行结果（至少有两个查询结果和两个报表输出结果）。
管理员界面
用户管理：


图书管理：


借阅管理：（查询所有借阅信息）


处理用户“101160001”对图书“O13（0001）”的续借操作：


用户界面：
用户张三登录后查看到的个人信息：


图书信息：



查询索书号为“9787040249026”的图书信息：

7.3 系统评价：采用的有特色的技术与技巧；成功之处与主要特点；系统会改进完善之处和进一步工作的打算。
系统特色与技巧：
（1）该图书管理系统纯采用Jsp+数据库sql实现，前端界面采用html+css编写，后台数据库使用Microsoft SQL2014，在系统界面中，基本采用jdbc进行数据库连接访问数据，各个页面之前的跳转采用Jsp动态页面设计
（2）安全，通过账号密码进行身份验证，可以有效防止非法用户进行操作；系统界面简单友好，十分方便查询和修改
成功之处与主要特点：
（1）系统简单，操作方便，无需任何专业技巧
（2）实现了通过一个按钮即可完成对多个数据库基本表的数据进行增删查改，利用数据库中的触发器实现借阅操作时自动更新基本表的还书日期，提高图书管理员处理借阅信息的效率
（3）运用数据库的语句基本操作，实现了同时对续借次数和归还日期的同时更新
（4）满足对所有基本信息的查询要求
改进完善之处：
（1）用户不仅可以查看基本信息，也可赋予用户修改基本信息的权限
（2）当前系统用户可以查看到自己的借阅信息，但逾期需缴纳的罚金只有管理员可以看到并进行处理，还没有实现对用户借书逾期情况需缴纳多少罚金弹出提示信息的功能
（3）当前系统中管理员添加图书基本信息时，对应的副本数量及信息并没有及时更新，后续可以细化这一模块
（4）完善数据库的完整性设计，加入代码对输入的数据进行检查，减低系统运行过程出错的可能，使系统更具有实际效用
